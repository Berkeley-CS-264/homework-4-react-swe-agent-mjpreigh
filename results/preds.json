{
  "psf__requests-1921": {
    "model_name_or_path": "gpt-5-mini",
    "instance_id": "psf__requests-1921",
    "model_patch": "diff --git a/requests/models.py b/requests/models.py\nindex cd232e6..945aa1d 100644\n--- a/requests/models.py\n+++ b/requests/models.py\n@@ -391,7 +391,15 @@ class PreparedRequest(RequestEncodingMixin, RequestHooksMixin):\n         \"\"\"Prepares the given HTTP headers.\"\"\"\n \n         if headers:\n-            self.headers = CaseInsensitiveDict((to_native_string(name), value) for name, value in headers.items())\n+            # Filter out headers explicitly set to None. Setting a header's value to None on\n+            # a Session should indicate it should not be sent, not that the string \"None\"\n+            # should be transmitted. For example, session.headers['Accept-Encoding'] = None\n+            # should remove that header rather than send 'Accept-Encoding: None'.\n+            self.headers = CaseInsensitiveDict(\n+                (to_native_string(name), value)\n+                for name, value in headers.items()\n+                if value is not None\n+            )\n         else:\n             self.headers = CaseInsensitiveDict()\n \n"
  },
  "sympy__sympy-24213": {
    "model_name_or_path": "gpt-5-mini",
    "instance_id": "sympy__sympy-24213",
    "model_patch": "diff --git a/sympy/physics/units/unitsystem.py b/sympy/physics/units/unitsystem.py\nindex a436880c4b..a597defada 100644\n--- a/sympy/physics/units/unitsystem.py\n+++ b/sympy/physics/units/unitsystem.py\n@@ -175,7 +175,13 @@ def _collect_factor_and_dimension(self, expr):\n             for addend in expr.args[1:]:\n                 addend_factor, addend_dim = \\\n                     self._collect_factor_and_dimension(addend)\n-                if dim != addend_dim:\n+                # consider dimensions equivalent according to the dimension system\n+                dimsys = self.get_dimension_system()\n+                if dimsys is not None:\n+                    equivalent = dimsys.equivalent_dims(dim, addend_dim)\n+                else:\n+                    equivalent = (dim == addend_dim)\n+                if not equivalent:\n                     raise ValueError(\n                         'Dimension of \"{}\" is {}, '\n                         'but it should be {}'.format(\n"
  },
  "django__django-11179": {
    "model_name_or_path": "gpt-5-mini",
    "instance_id": "django__django-11179",
    "model_patch": "diff --git a/django/db/models/deletion.py b/django/db/models/deletion.py\nindex 92fe4affb9..c262dede3e 100644\n--- a/django/db/models/deletion.py\n+++ b/django/db/models/deletion.py\n@@ -272,12 +272,17 @@ class Collector:\n         deleted_counter = Counter()\n \n         # Optimize for the case with a single obj and no dependencies\n-        if len(self.data) == 1 and len(instances) == 1:\n-            instance = list(instances)[0]\n-            if self.can_fast_delete(instance):\n-                with transaction.mark_for_rollback_on_error():\n-                    count = sql.DeleteQuery(model).delete_batch([instance.pk], self.using)\n-                return count, {model._meta.label: count}\n+        if len(self.data) == 1:\n+            # get the single (model, instances) pair\n+            model, instances = next(iter(self.data.items()))\n+            if len(instances) == 1:\n+                instance = instances[0]\n+                if self.can_fast_delete(instance):\n+                    with transaction.mark_for_rollback_on_error():\n+                        count = sql.DeleteQuery(model).delete_batch([instance.pk], self.using)\n+                    # Update the instance primary key to None to reflect deletion\n+                    setattr(instance, model._meta.pk.attname, None)\n+                    return count, {model._meta.label: count}\n \n         with transaction.atomic(using=self.using, savepoint=False):\n             # send pre_delete signals\n"
  },
  "astropy__astropy-7166": {
    "model_name_or_path": "gpt-5-mini",
    "instance_id": "astropy__astropy-7166",
    "model_patch": "diff --git a/astropy/utils/misc.py b/astropy/utils/misc.py\nindex de3fb01d1..cceaeb957 100644\n--- a/astropy/utils/misc.py\n+++ b/astropy/utils/misc.py\n@@ -528,7 +528,7 @@ class InheritDocstrings(type):\n                 not key.startswith('_'))\n \n         for key, val in dct.items():\n-            if (inspect.isfunction(val) and\n+            if ((inspect.isfunction(val) or isinstance(val, property)) and\n                 is_public_member(key) and\n                 val.__doc__ is None):\n                 for base in cls.__mro__[1:]:\n"
  },
  "django__django-14053": {
    "model_name_or_path": "gpt-5-mini",
    "instance_id": "django__django-14053",
    "model_patch": "diff --git a/django/contrib/staticfiles/storage.py b/django/contrib/staticfiles/storage.py\nindex 494890cc23..15d60542af 100644\n--- a/django/contrib/staticfiles/storage.py\n+++ b/django/contrib/staticfiles/storage.py\n@@ -228,15 +228,22 @@ class HashedFilesMixin:\n         ]\n         # Do a single pass first. Post-process all files once, then repeat for\n         # adjustable files.\n+        yielded = {}\n         for name, hashed_name, processed, _ in self._post_process(paths, adjustable_paths, hashed_files):\n-            yield name, hashed_name, processed\n+            key = (hashed_name, processed)\n+            if yielded.get(name) != key:\n+                yield name, hashed_name, processed\n+                yielded[name] = key\n \n         paths = {path: paths[path] for path in adjustable_paths}\n \n         for i in range(self.max_post_process_passes):\n             substitutions = False\n             for name, hashed_name, processed, subst in self._post_process(paths, adjustable_paths, hashed_files):\n-                yield name, hashed_name, processed\n+                key = (hashed_name, processed)\n+                if yielded.get(name) != key:\n+                    yield name, hashed_name, processed\n+                    yielded[name] = key\n                 substitutions = substitutions or subst\n \n             if not substitutions:\n"
  },
  "django__django-14011": {
    "model_name_or_path": "gpt-5-mini",
    "instance_id": "django__django-14011",
    "model_patch": "diff --git a/django/test/testcases.py b/django/test/testcases.py\nindex 92f566b7b0..15481f0287 100644\n--- a/django/test/testcases.py\n+++ b/django/test/testcases.py\n@@ -1526,6 +1526,10 @@ class LiveServerThread(threading.Thread):\n             self.httpd.shutdown()\n             self.httpd.server_close()\n         self.join()\n+        # Ensure all database connections are closed after the live server\n+        # thread has stopped, to avoid race conditions where database\n+        # destruction fails because other threads still hold connections.\n+        connections.close_all()\n \n \n class LiveServerTestCase(TransactionTestCase):\n"
  },
  "django__django-13810": {
    "model_name_or_path": "gpt-5-mini",
    "instance_id": "django__django-13810",
    "model_patch": "diff --git a/django/core/handlers/base.py b/django/core/handlers/base.py\nindex 8e8c3da06a..8c2e4fe281 100644\n--- a/django/core/handlers/base.py\n+++ b/django/core/handlers/base.py\n@@ -50,12 +50,15 @@ class BaseHandler:\n             else:\n                 middleware_is_async = middleware_can_async\n             try:\n-                # Adapt handler, if needed.\n-                handler = self.adapt_method_mode(\n+                # Adapt handler, if needed. Use a temporary adapted_handler so that if the\n+                # middleware raises MiddlewareNotUsed during initialization, we don't\n+                # mutate the handler for subsequent middlewares (avoids \"poisoning\" with\n+                # an adapted wrapper).\n+                adapted_handler = self.adapt_method_mode(\n                     middleware_is_async, handler, handler_is_async,\n                     debug=settings.DEBUG, name='middleware %s' % middleware_path,\n                 )\n-                mw_instance = middleware(handler)\n+                mw_instance = middleware(adapted_handler)\n             except MiddlewareNotUsed as exc:\n                 if settings.DEBUG:\n                     if str(exc):\n"
  },
  "django__django-16662": {
    "model_name_or_path": "gpt-5-mini",
    "instance_id": "django__django-16662",
    "model_patch": "diff --git a/django/db/migrations/writer.py b/django/db/migrations/writer.py\nindex a59f0c8dcb..b8a535241a 100644\n--- a/django/db/migrations/writer.py\n+++ b/django/db/migrations/writer.py\n@@ -173,9 +173,20 @@ class MigrationWriter:\n         else:\n             imports.add(\"from django.db import migrations\")\n \n-        # Sort imports by the package / module to be imported (the part after\n-        # \"from\" in \"from ... import ...\" or after \"import\" in \"import ...\").\n-        sorted_imports = sorted(imports, key=lambda i: i.split()[1])\n+        # Sort imports into two groups: plain module imports (import ...)\n+        # first, then \"from ... import ...\" imports. Within each group, sort\n+        # by the package/module name (the part after \"import\" for plain\n+        # imports, or after \"from\" for from-imports).\n+        def _import_key(i):\n+            parts = i.split()\n+            # parts[0] is either \"import\" or \"from\"\n+            if parts[0] == \"import\":\n+                # (\"import\", module_name) -> (0, module_name) so plain imports come first\n+                return (0, parts[1])\n+            # \"from <module> import ...\"\n+            return (1, parts[1])\n+\n+        sorted_imports = sorted(imports, key=_import_key)\n         items[\"imports\"] = \"\\n\".join(sorted_imports) + \"\\n\" if imports else \"\"\n         if migration_imports:\n             items[\"imports\"] += (\n"
  },
  "psf__requests-2931": {
    "model_name_or_path": "gpt-5-mini",
    "instance_id": "psf__requests-2931",
    "model_patch": "diff --git a/requests/utils.py b/requests/utils.py\nindex 132cd2b..f293cbb 100644\n--- a/requests/utils.py\n+++ b/requests/utils.py\n@@ -688,11 +688,21 @@ def to_native_string(string, encoding='ascii'):\n     Given a string object, regardless of type, returns a representation of that\n     string in the native string type, encoding and decoding where necessary.\n     This assumes ASCII unless told otherwise.\n+\n+    Note: bytes objects (binary data) are returned unchanged. Decoding arbitrary\n+    binary data with ASCII by default caused errors when users passed bytes as\n+    request payloads. Requests supports bytes payloads, so we must not force a\n+    decode here.\n     \"\"\"\n     out = None\n \n+    # Native string type (str on both Python 2/3) -> return as-is.\n     if isinstance(string, builtin_str):\n         out = string\n+    # Bytes objects: leave as-is. On Python 2, bytes is the same as builtin_str,\n+    # so the previous branch will handle it.\n+    elif isinstance(string, bytes):\n+        out = string\n     else:\n         if is_py2:\n             out = string.encode(encoding)\n"
  },
  "django__django-10973": {
    "model_name_or_path": "gpt-5-mini",
    "instance_id": "django__django-10973",
    "model_patch": "diff --git a/django/db/backends/postgresql/client.py b/django/db/backends/postgresql/client.py\nindex 7fca6eff30..f9f8386f39 100644\n--- a/django/db/backends/postgresql/client.py\n+++ b/django/db/backends/postgresql/client.py\n@@ -58,7 +58,13 @@ class DatabaseClient(BaseDatabaseClient):\n                     pass\n             # Allow SIGINT to pass to psql to abort queries.\n             signal.signal(signal.SIGINT, signal.SIG_IGN)\n-            subprocess.check_call(args)\n+            # Use subprocess.run so we can pass a modified environment.\n+            env = os.environ.copy()\n+            if passwd:\n+                # Passing the password via PGPASSWORD is more reliable than\n+                # relying on external .pgpass files in some environments.\n+                env['PGPASSWORD'] = passwd\n+            subprocess.run(args, check=True, env=env)\n         finally:\n             # Restore the original SIGINT handler.\n             signal.signal(signal.SIGINT, sigint_handler)\n"
  },
  "scikit-learn__scikit-learn-26323": {
    "model_name_or_path": "gpt-5-mini",
    "instance_id": "scikit-learn__scikit-learn-26323",
    "model_patch": "diff --git a/sklearn/compose/_column_transformer.py b/sklearn/compose/_column_transformer.py\nindex 4eddd12b1..9635ada01 100644\n--- a/sklearn/compose/_column_transformer.py\n+++ b/sklearn/compose/_column_transformer.py\n@@ -293,18 +293,31 @@ class ColumnTransformer(TransformerMixin, _BaseComposition):\n             Estimator instance.\n         \"\"\"\n         super().set_output(transform=transform)\n-        transformers = (\n-            trans\n-            for _, trans, _ in chain(\n-                self.transformers, getattr(self, \"transformers_\", [])\n-            )\n-            if trans not in {\"passthrough\", \"drop\"}\n-        )\n-        for trans in transformers:\n+\n+        # Collect transformers from both the user-specified list and the fitted\n+        # transformers (if present). Ensure we set_output for the remainder\n+        # estimator as well when it is provided as an estimator on the\n+        # unfitted ColumnTransformer.\n+        seen = []\n+        for _, trans, _ in chain(self.transformers, getattr(self, \"transformers_\", [])):\n+            if trans in (\"passthrough\", \"drop\"):\n+                continue\n+            # Avoid setting output multiple times for the same object.\n+            if any(t is trans for t in seen):\n+                continue\n             _safe_set_output(trans, transform=transform)\n+            seen.append(trans)\n+\n+        # If remainder is an estimator provided on the unfitted ColumnTransformer,\n+        # make sure to configure its output as well.\n+        if hasattr(self, \"remainder\") and self.remainder not in (\"passthrough\", \"drop\"):\n+            # Avoid duplicate if the same estimator object was already handled.\n+            if not any(t is self.remainder for t in seen):\n+                _safe_set_output(self.remainder, transform=transform)\n \n         return self\n \n+\n     def get_params(self, deep=True):\n         \"\"\"Get parameters for this estimator.\n \n"
  },
  "sympy__sympy-17655": {
    "model_name_or_path": "gpt-5-mini",
    "instance_id": "sympy__sympy-17655",
    "model_patch": "diff --git a/sympy/geometry/point.py b/sympy/geometry/point.py\nindex 7c978c47be..b060db5aff 100644\n--- a/sympy/geometry/point.py\n+++ b/sympy/geometry/point.py\n@@ -32,6 +32,7 @@\n from sympy.core.numbers import Float\n from sympy.core.evaluate import global_evaluate\n from sympy.core.add import Add\n+from sympy.core.mul import Mul\n from sympy.utilities.iterables import uniq\n from sympy.utilities.misc import filldedent, func_name, Undecidable\n \n@@ -213,6 +214,19 @@ def __add__(self, other):\n         sympy.geometry.point.Point.translate\n \n         \"\"\"\n+        # If other is a Mul that contains a Point factor (e.g. 2*Point(1, 1)),\n+        # extract the Point and the remaining scalar factor so that the\n+        # multiplication is performed via Point.__mul__ and normalized\n+        # properly. This makes scalar*Point behave the same as Point*scalar.\n+        if isinstance(other, Mul):\n+            # find a Point factor in the Mul's args\n+            for f in other.args:\n+                if isinstance(f, Point):\n+                    # remaining factor is the product of the other args\n+                    remaining = Mul(*[g for g in other.args if g is not f])\n+                    other = f * remaining\n+                    break\n+\n         try:\n             s, o = Point._normalize_dimension(self, Point(other, evaluate=False))\n         except TypeError:\n"
  },
  "django__django-13297": {
    "model_name_or_path": "gpt-5-mini",
    "instance_id": "django__django-13297",
    "model_patch": "diff --git a/django/views/generic/base.py b/django/views/generic/base.py\nindex ea5baca08d..21e9ca40a2 100644\n--- a/django/views/generic/base.py\n+++ b/django/views/generic/base.py\n@@ -11,7 +11,7 @@ from django.template.response import TemplateResponse\n from django.urls import reverse\n from django.utils.decorators import classonlymethod\n from django.utils.deprecation import RemovedInDjango40Warning\n-from django.utils.functional import SimpleLazyObject\n+from django.utils.functional import SimpleLazyObject, empty\n \n logger = logging.getLogger('django.request')\n \n@@ -27,6 +27,17 @@ class ContextMixin:\n         kwargs.setdefault('view', self)\n         if self.extra_context is not None:\n             kwargs.update(self.extra_context)\n+        # Unwrap any SimpleLazyObject instances (e.g. URL kwargs wrapped for\n+        # deprecation warnings) so downstream code that expects plain values\n+        # (like ORM lookups) receives the actual object types.\n+        for key, value in list(kwargs.items()):\n+            if isinstance(value, SimpleLazyObject):\n+                # Ensure the lazy object is initialized.\n+                if getattr(value, '_wrapped', None) is empty:\n+                    # Force setup to populate _wrapped.\n+                    value._setup()\n+                kwargs[key] = value._wrapped\n+        return kwargs\n         return kwargs\n \n \n"
  },
  "pytest-dev__pytest-7490": {
    "model_name_or_path": "gpt-5-mini",
    "instance_id": "pytest-dev__pytest-7490",
    "model_patch": "*** Begin Patch\n*** Update File: src/_pytest/python.py\n@@\n     def runtest(self) -> None:\n         \"\"\" execute the underlying test function. \"\"\"\n         self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n \n     def setup(self) -> None:\n         if isinstance(self.parent, Instance):\n             self.parent.newinstance()\n             self.obj = self._getobj()\n         self._request._fillfixtures()\n \n     def _prunetraceback(self, excinfo: ExceptionInfo) -> None:\n         if hasattr(self, \"_obj\") and not self.config.getoption(\"fulltrace\", False):\n@@\n         if self.config.getoption(\"tbstyle\", \"auto\") == \"auto\":\n             if len(excinfo.traceback) > 2:\n                 for entry in excinfo.traceback[1:-1]:\n                     entry.set_repr_style(\"short\")\n \n         def repr_failure(  # type: ignore[override]\n             self, excinfo: ExceptionInfo[BaseException],\n         ) -> Union[str, TerminalRepr]:\n             style = self.config.getoption(\"tbstyle\", \"auto\")\n             if style == \"auto\":\n                 style = \"long\"\n             return self._repr_failure_py(excinfo, style=style)\n+\n+    # Ensure dynamically-added xfail markers (e.g. request.node.add_marker(pytest.mark.xfail(...)))\n+    # affect outcome similarly to static @pytest.mark.xfail markers by exposing markers\n+    # via iter_markers() during runtest/reporting. Historically some codepaths relied on\n+    # own_markers being populated during obj lookup; make sure any markers added at runtime\n+    # to the node are visible by updating own_markers when add_marker is used on the node.\n+    def add_marker(self, marker: Mark) -> None:\n+        \"\"\"\n+        Compatibility helper: expose a way to add markers to the Function node at runtime.\n+        Tests historically used request.node.add_marker(mark) to dynamically mark tests.\n+        This method mirrors Collector.add_marker behavior for Function nodes and makes\n+        sure own_markers and keywords are updated accordingly.\n+        \"\"\"\n+        # normalize and append marker(s)\n+        from _pytest.mark.structures import normalize_mark_list\n+\n+        normalized = normalize_mark_list([marker])\n+        self.own_markers.extend(normalized)\n+        for m in normalized:\n+            # keep keywords in sync (similar to constructor behavior)\n+            if m.name not in self.keywords:\n+                self.keywords[m.name] = True\n*** End Patch\n----END_FUNCTION_CALL****\n\nNo changes detected to generate a patch."
  },
  "django__django-7530": {
    "model_name_or_path": "gpt-5-mini",
    "instance_id": "django__django-7530",
    "model_patch": "diff --git a/django/core/management/commands/makemigrations.py b/django/core/management/commands/makemigrations.py\nindex 0b39536f5b..e648880ef0 100644\n--- a/django/core/management/commands/makemigrations.py\n+++ b/django/core/management/commands/makemigrations.py\n@@ -105,7 +105,7 @@ class Command(BaseCommand):\n                     # At least one model must be migrated to the database.\n                     router.allow_migrate(connection.alias, app_label, model_name=model._meta.object_name)\n                     for app_label in consistency_check_labels\n-                    for model in apps.get_models(app_label)\n+                    for model in apps.get_app_config(app_label).get_models()\n             )):\n                 loader.check_consistent_history(connection)\n \n"
  },
  "django__django-16631": {
    "model_name_or_path": "gpt-5-mini",
    "instance_id": "django__django-16631",
    "model_patch": "diff --git a/django/contrib/auth/tokens.py b/django/contrib/auth/tokens.py\nindex 09cc2b5195..ff0f26b702 100644\n--- a/django/contrib/auth/tokens.py\n+++ b/django/contrib/auth/tokens.py\n@@ -1,6 +1,7 @@\n from datetime import datetime\n \n from django.conf import settings\n+from django.core.exceptions import ImproperlyConfigured\n from django.utils.crypto import constant_time_compare, salted_hmac\n from django.utils.http import base36_to_int, int_to_base36\n \n@@ -20,7 +21,16 @@ class PasswordResetTokenGenerator:\n         self.algorithm = self.algorithm or \"sha256\"\n \n     def _get_secret(self):\n-        return self._secret or settings.SECRET_KEY\n+        # Prefer an explicitly set secret on the instance, otherwise use the\n+        # project's SECRET_KEY. Raise if the resolved secret is empty so that\n+        # callers know that SECRET_KEY must be set.\n+        if self._secret is not None:\n+            secret = self._secret\n+        else:\n+            secret = settings.SECRET_KEY\n+        if not secret:\n+            raise ImproperlyConfigured(\"The SECRET_KEY setting must not be empty.\")\n+        return secret\n \n     def _set_secret(self, secret):\n         self._secret = secret\n@@ -28,9 +38,17 @@ class PasswordResetTokenGenerator:\n     secret = property(_get_secret, _set_secret)\n \n     def _get_fallbacks(self):\n+        # If no explicit fallbacks set on the instance, pull from settings.\n         if self._secret_fallbacks is None:\n-            return settings.SECRET_KEY_FALLBACKS\n-        return self._secret_fallbacks\n+            fallbacks = getattr(settings, \"SECRET_KEY_FALLBACKS\", [])\n+        else:\n+            fallbacks = self._secret_fallbacks\n+        # Normalize to a list to avoid issues when unpacking/iterating.\n+        if not fallbacks:\n+            return []\n+        if isinstance(fallbacks, (str, bytes)):\n+            return [fallbacks]\n+        return list(fallbacks)\n \n     def _set_fallbacks(self, fallbacks):\n         self._secret_fallbacks = fallbacks\n"
  },
  "sphinx-doc__sphinx-9658": {
    "model_name_or_path": "gpt-5-mini",
    "instance_id": "sphinx-doc__sphinx-9658",
    "model_patch": "diff --git a/sphinx/util/typing.py b/sphinx/util/typing.py\nindex 87707d48f..aa83ca0a0 100644\n--- a/sphinx/util/typing.py\n+++ b/sphinx/util/typing.py\n@@ -192,10 +192,24 @@ def _restify_py37(cls: Optional[Type]) -> str:\n     elif isinstance(cls, typing._SpecialForm):\n         return ':py:obj:`~%s.%s`' % (cls.__module__, cls._name)\n     elif hasattr(cls, '__qualname__'):\n+        # Some mocked or broken objects may have an empty __qualname__. Fall back to\n+        # other attributes (__name__, __display_name__) to avoid producing a\n+        # trailing dot like \"module.\".\n+        qual = getattr(cls, '__qualname__', None) or getattr(cls, '__name__', None)\n+        if not qual:\n+            display = getattr(cls, '__display_name__', None)\n+            if display:\n+                # If display looks fully-qualified already, just use it.\n+                if '.' in display:\n+                    return ':py:class:`%s`' % display\n+                qual = display\n+            else:\n+                qual = ''\n+\n         if cls.__module__ == 'typing':\n-            return ':py:class:`~%s.%s`' % (cls.__module__, cls.__qualname__)\n+            return ':py:class:`~%s.%s`' % (cls.__module__, qual)\n         else:\n-            return ':py:class:`%s.%s`' % (cls.__module__, cls.__qualname__)\n+            return ':py:class:`%s.%s`' % (cls.__module__, qual)\n     elif isinstance(cls, ForwardRef):\n         return ':py:class:`%s`' % cls.__forward_arg__\n     else:\n@@ -274,10 +288,24 @@ def _restify_py36(cls: Optional[Type]) -> str:\n         else:\n             return ':py:obj:`Union`'\n     elif hasattr(cls, '__qualname__'):\n+        # Some mocked or broken objects may have an empty __qualname__. Fall back to\n+        # other attributes (__name__, __display_name__) to avoid producing a\n+        # trailing dot like \"module.\".\n+        qual = getattr(cls, '__qualname__', None) or getattr(cls, '__name__', None)\n+        if not qual:\n+            display = getattr(cls, '__display_name__', None)\n+            if display:\n+                # If display looks fully-qualified already, just use it.\n+                if '.' in display:\n+                    return ':py:class:`%s`' % display\n+                qual = display\n+            else:\n+                qual = ''\n+\n         if cls.__module__ == 'typing':\n-            return ':py:class:`~%s.%s`' % (cls.__module__, cls.__qualname__)\n+            return ':py:class:`~%s.%s`' % (cls.__module__, qual)\n         else:\n-            return ':py:class:`%s.%s`' % (cls.__module__, cls.__qualname__)\n+            return ':py:class:`%s.%s`' % (cls.__module__, qual)\n     elif hasattr(cls, '_name'):\n         # SpecialForm\n         if cls.__module__ == 'typing':\n"
  },
  "sphinx-doc__sphinx-7590": {
    "model_name_or_path": "gpt-5-mini",
    "instance_id": "sphinx-doc__sphinx-7590",
    "model_patch": "diff --git a/sphinx/domains/cpp.py b/sphinx/domains/cpp.py\nindex fe52d881d..2c2dfd458 100644\n--- a/sphinx/domains/cpp.py\n+++ b/sphinx/domains/cpp.py\n@@ -4664,10 +4664,19 @@ class DefinitionParser(BaseParser):\n             if self.match(regex):\n                 while self.current_char in 'uUlLfF':\n                     self.pos += 1\n+                # optionally accept a user-defined-literal (UDL) suffix (an identifier)\n+                # e.g. 42_kg, 6.626e-34q_J\n+                self.match(identifier_re)\n                 return ASTNumberLiteral(self.definition[pos:self.pos])\n \n         string = self._parse_string()\n         if string is not None:\n+            # optionally accept a user-defined-literal (UDL) suffix for strings\n+            # e.g. \"hello\"s\n+            s_pos = self.pos\n+            if self.match(identifier_re):\n+                # append the suffix to the string data\n+                string = string + self.last_match.group(0)\n             return ASTStringLiteral(string)\n \n         # character-literal\n@@ -4675,6 +4684,9 @@ class DefinitionParser(BaseParser):\n             prefix = self.last_match.group(1)  # may be None when no prefix\n             data = self.last_match.group(2)\n             try:\n+                # optionally accept a user-defined-literal (UDL) suffix for chars\n+                # e.g. 'a'_kg\n+                self.match(identifier_re)\n                 return ASTCharLiteral(prefix, data)\n             except UnicodeDecodeError as e:\n                 self.fail(\"Can not handle character literal. Internal error was: %s\" % e)\n"
  },
  "sphinx-doc__sphinx-9230": {
    "model_name_or_path": "gpt-5-mini",
    "instance_id": "sphinx-doc__sphinx-9230",
    "model_patch": "diff --git a/sphinx/util/docfields.py b/sphinx/util/docfields.py\nindex 3a3367ebe..854160fb5 100644\n--- a/sphinx/util/docfields.py\n+++ b/sphinx/util/docfields.py\n@@ -297,13 +297,17 @@ class DocFieldTransformer:\n \n             # also support syntax like ``:param type name:``\n             if typedesc.is_typed:\n+                # Support syntax like \":param type name:\" where the type may\n+                # contain spaces or punctuation (for example \"dict(str, str)\").\n+                # Split from the right so the final token is treated as the\n+                # parameter name and everything before it is the type.\n                 try:\n-                    argtype, argname = fieldarg.split(None, 1)\n+                    argtype, argname = fieldarg.rsplit(None, 1)\n                 except ValueError:\n+                    # could not split into two parts; ignore\n                     pass\n                 else:\n-                    types.setdefault(typename, {})[argname] = \\\n-                        [nodes.Text(argtype)]\n+                    types.setdefault(typename, {})[argname] = [nodes.Text(argtype)]\n                     fieldarg = argname\n \n             translatable_content = nodes.inline(field_body.rawsource,\n"
  },
  "django__django-12406": {
    "model_name_or_path": "gpt-5-mini",
    "instance_id": "django__django-12406",
    "model_patch": "diff --git a/django/forms/models.py b/django/forms/models.py\nindex dafc11f995..9977952af8 100644\n--- a/django/forms/models.py\n+++ b/django/forms/models.py\n@@ -1185,7 +1185,16 @@ class ModelChoiceField(ChoiceField):\n                  required=True, widget=None, label=None, initial=None,\n                  help_text='', to_field_name=None, limit_choices_to=None,\n                  **kwargs):\n-        if required and (initial is not None):\n+        # RadioSelect widgets have an inherent unfilled state; don't present\n+        # a blank option for required model choice fields when using radios.\n+        # We import RadioSelect here to avoid a top-level import cycle.\n+        from django.forms.widgets import RadioSelect\n+        widget_is_radio = isinstance(widget, RadioSelect) or (\n+            isinstance(widget, type) and issubclass(widget, RadioSelect)\n+        )\n+        if widget_is_radio and required:\n+            self.empty_label = None\n+        elif required and (initial is not None):\n             self.empty_label = None\n         else:\n             self.empty_label = empty_label\n"
  }
}