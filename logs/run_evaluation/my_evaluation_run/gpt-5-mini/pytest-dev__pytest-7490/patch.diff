*** Begin Patch
*** Update File: src/_pytest/skipping.py
@@
 def pytest_runtest_makereport(item: Item, call: CallInfo[None]):
     outcome = yield
     rep = outcome.get_result()
-    xfailed = item._store.get(xfailed_key, None)
+    # Refresh xfail evaluation here if it hasn't been evaluated yet
+    # This ensures markers that were added dynamically during the test
+    # (e.g. via request.node.add_marker(pytest.mark.xfail(...))) are
+    # taken into account when building the report.
+    xfailed = item._store.get(xfailed_key, None)
+    if xfailed is None:
+        xfailed = evaluate_xfail_marks(item)
+        item._store[xfailed_key] = xfailed
*** End Patch

No changes detected to generate a patch.